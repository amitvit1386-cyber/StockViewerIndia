- name: Install Android command-line tools
        run: |
          mkdir -p "$ANDROID_SDK_ROOT/cmdline-tools"
          cd "$ANDROID_SDK_ROOT/cmdline-tools"

          wget https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip -O tools.zip
          unzip tools.zip -d extracted
          rm tools.zip

          # Detect the real folder name automatically:
          FOLDER=$(ls extracted)
          echo "Detected tools folder: $FOLDER"

          # Move to latest (fix for any folder name)
          mv "extracted/$FOLDER" latest
          rm -rf extracted

          echo "Verifying sdkmanager path..."
          ls -R "$ANDROID_SDK_ROOT/cmdline-tools/latest"

          yes | "$ANDROID_SDK_ROOT/cmdline-tools/latest/bin/sdkmanager" --sdk_root="$ANDROID_SDK_ROOT" --licenses
          "$ANDROID_SDK_ROOT/cmdline-tools/latest/bin/sdkmanager" --sdk_root="$ANDROID_SDK_ROOT" \
            "platform-tools" "platforms;android-33" "build-tools;33.0.2"
